DROP TABLE STORE CASCADE;
DROP TABLE PRODUCT CASCADE;
DROP TABLE INVENTORY CASCADE;

CREATE TABLE IF NOT EXISTS store (
	id SERIAL,
	nome VARCHAR(255) NOT NULL,
	document INTEGER NOT NULL,
	PRIMARY KEY (id)
);

CREATE UNIQUE INDEX CONCURRENTLY store_document 
ON store (document);

CREATE TABLE IF NOT EXISTS product (
    id SERIAL,
    nome VARCHAR(255) NOT NULL,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS inventory (
    id SERIAL,
    product_id INTEGER NOT NULL,
    store_id INTEGER NOT NULL,
    amount INTEGER NOT NULL,
    price NUMERIC(15,2) NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (product_id) REFERENCES product (id),
    FOREIGN KEY (store_id) REFERENCES store (id)
);
